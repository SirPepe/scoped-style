window.ScopedStyle=window.ScopedStyle||function(){"use strict";function escapeRegExp(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var scopeClassRe=/\bscope-[a-z0-9]*-[0-9]*\b/;var scopeSelectorRe=/(?:^|\s|\n|\W)*-x-scope\b/;function createScope(){return"scope-"+Math.random().toString(36).slice(2)+"-"+Date.now()}function splitSelector(input){var result=[];var index=0;var quote=false;for(var i=0;i<input.length;i++){if(typeof result[index]==="undefined"){result[index]=""}if(input[i]===","&&quote===false){index++}else{if(['"',"'"].indexOf(input[i])!==-1){if(quote===false){quote=input[i]}else if(quote===input[i]){quote=false}}result[index]+=input[i]}}return result.map(Function.prototype.call.bind(String.prototype.trim))}function findChildren(node,selector){var descendants=node.querySelectorAll(selector);return[].filter.call(descendants,function(descendant){return descendant.parentNode===node})}function rewriteSelector(selector,scope){return splitSelector(selector).map(function(s){if(selector.match(scopeSelectorRe)){return"."+scope+s.replace(scopeSelectorRe,"")}else{return"."+scope+" "+s}}).join(",")}function rewriteRule(rule,scope){var reSelector=new RegExp("^\\s*"+escapeRegExp(rule.selectorText));var css=rule.cssText.replace(reSelector,"");var selector=rewriteSelector(rule.selectorText,scope);return selector+css}function rewriteRules(source,scope){var rules=source.cssRules;for(var i=0;i<rules.length;i++){switch(rules[i].type){case 1:var newCssText=rewriteRule(rules[i],scope);source.deleteRule(i);source.insertRule(newCssText,i);break;case 4:rewriteRules(rules[i],scope);break;default:break}}}function setScope(node,scope){[].forEach.call(node.classList,function(className){if(className.match(scopeClassRe)){var styleNodes=findChildren(node,'[data-scope="'+className+'"]');if(styleNodes.length===0){node.classList.remove(className)}}});node.classList.add(scope)}class ScopedStyle extends HTMLStyleElement{connectedCallback(){var scope=createScope();this.setAttribute("data-scope",scope);rewriteRules(this.sheet,scope);setScope(this.parentNode,scope)}}customElements.define("scoped-style",ScopedStyle,{extends:"style"});return ScopedStyle}();